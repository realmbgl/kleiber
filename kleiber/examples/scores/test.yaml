name: core

datacenter: "{{ parameters.datacenter }}"

mappings:
   servertypes:
      medium:
         cpus: 4
         memory: 8192
         hourly: True

resources:
   serverinstances:
      masters:
        servertype: medium
        count: 1
        os_code: UBUNTU_LATEST_64
        domain: mesos.maceacs.com
        hostname: "{{ clustername }}-master"

post-scripts:
  "mesos-ha/waitForUp.py":
    - '{{ resources["serverinstances"]["masters"]["vms"][0]["primaryIpAddress"] }}'
    - '{{ resources["serverinstances"]["masters"]["count"] }}'

cleanup-scripts:
  "mesos-ha/cleanup.py":
    - "{{ parameters.datacenter }}"